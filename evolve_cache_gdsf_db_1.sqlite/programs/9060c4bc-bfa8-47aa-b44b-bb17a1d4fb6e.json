{"id": "9060c4bc-bfa8-47aa-b44b-bb17a1d4fb6e", "code": "#include <cstdint>\n#include <unordered_map>\n#include <set>\n\ntypedef uint64_t obj_id_t;\n\n// Simple LFU cache: evict the least-frequently-used object, break ties by insertion order.\nclass CacheManager {\nprivate:\n    struct Node {\n        uint64_t freq;\n        uint64_t timestamp;\n        obj_id_t id;\n        uint64_t size;\n        bool operator<(const Node& other) const {\n            if (freq != other.freq) return freq < other.freq;\n            // Break ties by favoring smaller objects\n            if (size != other.size) return size < other.size;\n            return timestamp < other.timestamp;\n        }\n    };\n    // Store freq, size, iterator to Node in set\n    std::unordered_map<obj_id_t, std::tuple<uint64_t, uint64_t, std::set<Node>::iterator>> obj2node;\n    std::set<Node> freq_set;\n    uint64_t ts = 0;\n\npublic:\n    bool find(obj_id_t obj_id) {\n        auto it = obj2node.find(obj_id);\n        if (it == obj2node.end()) return false;\n        uint64_t old_freq = std::get<0>(it->second);\n        uint64_t sz = std::get<1>(it->second);\n        auto iter = std::get<2>(it->second);\n        Node old_node = *iter;\n        freq_set.erase(iter);\n        Node new_node = {old_freq + 1, ++ts, obj_id, sz};\n        auto new_iter = freq_set.insert(new_node).first;\n        it->second = std::make_tuple(old_freq + 1, sz, new_iter);\n        return true;\n    }\n\n    void insert(obj_id_t obj_id, uint64_t obj_size) {\n        auto it = obj2node.find(obj_id);\n        if (it != obj2node.end()) {\n            find(obj_id);\n            return;\n        }\n        Node n = {1, ++ts, obj_id, obj_size};\n        auto iter = freq_set.insert(n).first;\n        obj2node[obj_id] = std::make_tuple(1, obj_size, iter);\n    }\n\n    obj_id_t evict() {\n        if (freq_set.empty()) return 0;\n        auto it = freq_set.begin();\n        obj_id_t victim = it->id;\n        freq_set.erase(it);\n        obj2node.erase(victim);\n        return victim;\n    }\n};", "language": "python", "parent_id": "2de1cb28-3f1d-43ba-a709-1d075fa92af7", "generation": 2, "timestamp": 1763752812.7919724, "iteration_found": 18, "metrics": {"combined_score": -Infinity}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 12 lines with 16 lines\nChange 2: Replace 22 lines with 24 lines\nChange 3: Replace 8 lines with 8 lines", "parent_metrics": {"combined_score": 0.8302, "miss_ratio_4": 0.4385, "miss_ratio_45": 0.2988, "miss_ratio_450": 0.1698}, "island": 0}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}