{"id": "94346c55-f41b-4964-8aff-73c5fd7df1c6", "code": "#include <cstdint>\n#include <unordered_map>\n#include <list>\n\ntypedef uint64_t obj_id_t;\n\n// Simple LRU-K (K=2) implementation: object promoted to LRU list only after 2 accesses (improves recency/frequency mix)\nclass CacheManager {\nprivate:\n    static constexpr int K = 2;\n    // For objects seen less than K times, count their accesses\n    std::unordered_map<obj_id_t, int> history_count;\n    // Standard LRU list for objects that reached at least K hits\n    std::list<obj_id_t> lru_list;\n    std::unordered_map<obj_id_t, std::list<obj_id_t>::iterator> lru_map;\n\npublic:\n    bool find(obj_id_t obj_id) {\n        auto it = lru_map.find(obj_id);\n        if (it != lru_map.end()) {\n            lru_list.erase(it->second);\n            lru_list.push_front(obj_id);\n            lru_map[obj_id] = lru_list.begin();\n            return true;\n        }\n        // Not in LRU: track count\n        int &cnt = history_count[obj_id];\n        cnt++;\n        if (cnt >= K) {\n            // Promote to LRU\n            lru_list.push_front(obj_id);\n            lru_map[obj_id] = lru_list.begin();\n            history_count.erase(obj_id);\n        }\n        return false;\n    }\n\n    void insert(obj_id_t obj_id, uint64_t obj_size) {\n        // Remove from LRU or history if present, then insert as new\n        if (lru_map.count(obj_id)) {\n            lru_list.erase(lru_map[obj_id]);\n            lru_map.erase(obj_id);\n        }\n        history_count.erase(obj_id);\n        // Count as first access (will be promoted to LRU on second find)\n        history_count[obj_id] = 1;\n        // obj_size ignored\n        (void)obj_size;\n    }\n\n    obj_id_t evict() {\n        if (!lru_list.empty()) {\n            obj_id_t victim = lru_list.back();\n            lru_list.pop_back();\n            lru_map.erase(victim);\n            return victim;\n        }\n        // If LRU is empty, evict the oldest item from the history table (FIFO from history)\n        if (!history_count.empty()) {\n            // Pick the smallest key as \"oldest\" (approximate FIFO)\n            auto it = history_count.begin();\n            obj_id_t victim = it->first;\n            history_count.erase(it);\n            return victim;\n        }\n        return 0;\n    }\n};", "language": "python", "parent_id": "6879d981-83e7-4bcf-b58d-0ab35ff75a3a", "generation": 1, "timestamp": 1763752561.6073568, "iteration_found": 6, "metrics": {"combined_score": -Infinity}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 37 lines with 68 lines", "parent_metrics": {"combined_score": 0.8077, "miss_ratio_4": 0.4257, "miss_ratio_45": 0.2907, "miss_ratio_450": 0.1923}, "island": 0}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}