{"id": "8f3bbe8d-a6da-47e1-a2e4-e7a0d2231509", "code": "#include <cstdint>\n#include <unordered_map>\n#include <set>\n\ntypedef uint64_t obj_id_t;\n\n// Simple LFU cache: evict the least-frequently-used (LFU) object;\n// for ties, evict the least-recently-used (LRU) among them.\nclass CacheManager {\nprivate:\n    // Object info: freq, timestamp for LRU tiebreak, obj_size stored for possible extension\n    struct ObjectInfo {\n        uint64_t freq;\n        uint64_t timestamp;\n        uint64_t obj_size;\n    };\n    // Set node for ordering by freq, then timestamp\n    struct SetNode {\n        uint64_t freq;\n        uint64_t timestamp;\n        obj_id_t obj_id;\n        bool operator<(const SetNode& rhs) const {\n            if (freq != rhs.freq) return freq < rhs.freq;\n            if (timestamp != rhs.timestamp) return timestamp < rhs.timestamp;\n            return obj_id < rhs.obj_id;\n        }\n    };\n\n    std::unordered_map<obj_id_t, ObjectInfo> obj_map;\n    std::unordered_map<obj_id_t, std::set<SetNode>::iterator> set_map;\n    std::set<SetNode> lfu_set;\n    uint64_t time = 0;\n\npublic:\n    bool find(obj_id_t obj_id) {\n        auto it = obj_map.find(obj_id);\n        if (it == obj_map.end()) return false;\n\n        // Remove old node from set\n        auto set_it = set_map[obj_id];\n        lfu_set.erase(set_it);\n        // Update freq, timestamp\n        it->second.freq += 1;\n        it->second.timestamp = ++time;\n\n        // Insert new node\n        SetNode n{it->second.freq, it->second.timestamp, obj_id};\n        auto new_set_it = lfu_set.insert(n).first;\n        set_map[obj_id] = new_set_it;\n        return true;\n    }\n\n    void insert(obj_id_t obj_id, uint64_t obj_size) {\n        auto it = obj_map.find(obj_id);\n        if (it != obj_map.end()) {\n            // Already exists, treat as access\n            find(obj_id);\n            return;\n        }\n        ObjectInfo obj{1, ++time, obj_size};\n        obj_map[obj_id] = obj;\n        SetNode n{1, obj_map[obj_id].timestamp, obj_id};\n        auto set_it = lfu_set.insert(n).first;\n        set_map[obj_id] = set_it;\n    }\n\n    obj_id_t evict() {\n        if (lfu_set.empty()) return 0;\n        auto it = lfu_set.begin();\n        obj_id_t victim = it->obj_id;\n        lfu_set.erase(it);\n        set_map.erase(victim);\n        obj_map.erase(victim);\n        return victim;\n    }\n};", "language": "python", "parent_id": "6879d981-83e7-4bcf-b58d-0ab35ff75a3a", "generation": 1, "timestamp": 1763752548.1159022, "iteration_found": 3, "metrics": {"combined_score": -Infinity}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 37 lines with 76 lines", "parent_metrics": {"combined_score": 0.8077, "miss_ratio_4": 0.4257, "miss_ratio_45": 0.2907, "miss_ratio_450": 0.1923}, "island": 0}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}